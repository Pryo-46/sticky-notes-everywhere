# ä»˜ç®‹ã‚»ãƒƒãƒˆæ©Ÿèƒ½ å®Ÿè£…è¨ˆç”»

## æ¦‚è¦

ä»˜ç®‹ã‚’ã€Œã‚»ãƒƒãƒˆã€ã¨ã—ã¦åå‰ã‚’ã¤ã‘ã¦ä¿å­˜ãƒ»ç®¡ç†ã§ãã‚‹æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã€‚

## æ©Ÿèƒ½è¦ä»¶

### 1. ã‚»ãƒƒãƒˆã®ä¿å­˜
- ç¾åœ¨ã®ä»˜ç®‹ã‚’åå‰ã‚’ã¤ã‘ã¦ä¿å­˜
- åŒåã®ã‚»ãƒƒãƒˆãŒã‚ã‚‹å ´åˆã¯ä¸Šæ›¸ãç¢ºèª

### 2. ã‚»ãƒƒãƒˆã®èª­ã¿è¾¼ã¿
- ä¿å­˜æ¸ˆã¿ã‚»ãƒƒãƒˆä¸€è¦§ã‚’è¡¨ç¤º
- ã‚»ãƒƒãƒˆåã‚¯ãƒªãƒƒã‚¯ã§èª­ã¿è¾¼ã¿
- èª­ã¿è¾¼ã¿æ™‚ã«ã€Œç½®æ›ã€ã‹ã€Œãƒãƒ¼ã‚¸ï¼ˆè¿½åŠ ï¼‰ã€ã‚’é¸æŠ

### 3. ã‚»ãƒƒãƒˆã®ç·¨é›†ãƒ»å‰Šé™¤
- ã‚»ãƒƒãƒˆåã®ç·¨é›†ï¼ˆé‰›ç­†ã‚¢ã‚¤ã‚³ãƒ³ï¼‰
- ã‚»ãƒƒãƒˆã®å‰Šé™¤ï¼ˆã‚´ãƒŸç®±ã‚¢ã‚¤ã‚³ãƒ³ï¼‰

### 4. ãƒšãƒ¼ã‚¸å±¥æ­´ï¼ˆè‡ªå‹•ä¿å­˜ï¼‰
- ç›´è¿‘10ãƒšãƒ¼ã‚¸åˆ†ã®ä»˜ç®‹ã‚’è‡ªå‹•ä¿å­˜
- ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã«è‡ªå‹•çš„ã«å±¥æ­´ã«è¿½åŠ 
- å±¥æ­´ã‚¯ãƒªãƒƒã‚¯ã§å¾©å…ƒï¼ˆç½®æ›/ãƒãƒ¼ã‚¸é¸æŠï¼‰
- ã€Œå±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤ã€ãƒœã‚¿ãƒ³

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

```typescript
/** ä»˜ç®‹ã‚»ãƒƒãƒˆ */
interface StickyNoteSet {
  id: string;
  name: string;
  notes: StickyNoteData[];
  createdAt: number;
  updatedAt: number;
}

/** ãƒšãƒ¼ã‚¸å±¥æ­´ */
interface PageHistory {
  url: string;           // ãƒ›ã‚¹ãƒˆ+ãƒ‘ã‚¹
  title: string;         // ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆdocument.titleï¼‰
  notes: StickyNoteData[];
  savedAt: number;
}
```

## ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚­ãƒ¼

| ã‚­ãƒ¼ | ç”¨é€” |
|------|------|
| `stickyNotesData` | ç¾åœ¨ã®ä»˜ç®‹ï¼ˆæ—¢å­˜ï¼‰ |
| `stickyNotesSets` | åå‰ä»˜ãã‚»ãƒƒãƒˆä¸€è¦§ |
| `stickyNotesPageHistory` | ãƒšãƒ¼ã‚¸å±¥æ­´ï¼ˆæœ€å¤§10ä»¶ï¼‰ |

## UIè¨­è¨ˆ

### ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ã«è¿½åŠ 
- ã‚»ãƒƒãƒˆç®¡ç†ãƒœã‚¿ãƒ³ï¼ˆãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³ï¼‰

### ã‚»ãƒƒãƒˆç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ä»˜ç®‹ã‚»ãƒƒãƒˆç®¡ç†                    âœ• â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ç¾åœ¨ã®ä»˜ç®‹ã‚’ä¿å­˜...]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–  ä¿å­˜æ¸ˆã¿ã‚»ãƒƒãƒˆ                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆAç”¨       [âœï¸] [ğŸ—‘ï¸] â”‚ â”‚
â”‚ â”‚ èª­æ›¸ãƒ¡ãƒ¢              [âœï¸] [ğŸ—‘ï¸] â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â€»ã‚»ãƒƒãƒˆåã‚¯ãƒªãƒƒã‚¯ã§èª­ã¿è¾¼ã¿          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–  ãƒšãƒ¼ã‚¸å±¥æ­´        [å±¥æ­´ã‚’ã™ã¹ã¦å‰Šé™¤]â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«1 - example.com/..  â”‚ â”‚
â”‚ â”‚                     12/21 10:30 â”‚ â”‚
â”‚ â”‚ ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«2 - example.com/..  â”‚ â”‚
â”‚ â”‚                     12/21 10:25 â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â€»å±¥æ­´ã‚¯ãƒªãƒƒã‚¯ã§å¾©å…ƒ                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èª­ã¿è¾¼ã¿æ–¹æ³•: â—‹ç½®æ› â—‹ãƒãƒ¼ã‚¸ï¼ˆè¿½åŠ ï¼‰  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

### æ–°è¦ä½œæˆ
| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|----------|------|
| `src/content/components/SetManager/SetManager.ts` | ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ |
| `src/content/components/SetManager/SetManagerRenderer.ts` | HTMLç”Ÿæˆ |
| `src/content/components/SetManager/SetManagerController.ts` | ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç† |
| `src/content/styles/set-manager.css.ts` | ã‚¹ã‚¿ã‚¤ãƒ« |

### ä¿®æ­£
| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å†…å®¹ |
|----------|----------|
| `src/types/index.ts` | `StickyNoteSet`, `PageHistory` å‹è¿½åŠ  |
| `src/content/managers/StorageService.ts` | ã‚»ãƒƒãƒˆãƒ»å±¥æ­´ã®ä¿å­˜/èª­è¾¼ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ  |
| `src/content/types/storage.ts` | IStorageService ã«ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ  |
| `src/content/components/MenuBar/MenuBarRenderer.ts` | ã‚»ãƒƒãƒˆç®¡ç†ãƒœã‚¿ãƒ³è¿½åŠ  |
| `src/content/components/MenuBar/MenuBar.ts` | ã‚»ãƒƒãƒˆç®¡ç†ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¿½åŠ  |
| `src/content/index.ts` | SetManageråˆæœŸåŒ–ã€ãƒšãƒ¼ã‚¸é›¢è„±æ™‚ã®å±¥æ­´ä¿å­˜ |
| `src/content/icons.ts` | ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ  |

## å®Ÿè£…é †åº

### Phase 1: åŸºç›¤ï¼ˆå‹å®šç¾©ãƒ»ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
1. `src/types/index.ts` - `StickyNoteSet`, `PageHistory` å‹è¿½åŠ 
2. `src/content/types/storage.ts` - IStorageService ã«ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
3. `src/content/managers/StorageService.ts` - ã‚»ãƒƒãƒˆãƒ»å±¥æ­´ã®ä¿å­˜/èª­è¾¼ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
4. `src/content/icons.ts` - ãƒ•ã‚©ãƒ«ãƒ€ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ 

### Phase 2: SetManagerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
1. `src/content/styles/set-manager.css.ts` - ã‚¹ã‚¿ã‚¤ãƒ«ä½œæˆ
2. `src/content/components/SetManager/SetManagerRenderer.ts` - HTMLç”Ÿæˆ
3. `src/content/components/SetManager/SetManagerController.ts` - ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
4. `src/content/components/SetManager/SetManager.ts` - ãƒ¡ã‚¤ãƒ³ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰
5. `src/content/components/SetManager/index.ts` - ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### Phase 3: MenuBarçµ±åˆ
1. `src/content/components/MenuBar/MenuBarRenderer.ts` - ã‚»ãƒƒãƒˆç®¡ç†ãƒœã‚¿ãƒ³è¿½åŠ 
2. `src/content/components/MenuBar/MenuBar.ts` - ã‚»ãƒƒãƒˆç®¡ç†ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¿½åŠ 

### Phase 4: å…¨ä½“çµ±åˆãƒ»ãƒšãƒ¼ã‚¸å±¥æ­´
1. `src/content/index.ts` - SetManageråˆæœŸåŒ–ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š
2. `src/content/index.ts` - ãƒšãƒ¼ã‚¸å±¥æ­´ã®è‡ªå‹•ä¿å­˜ï¼ˆä»˜ç®‹å¤‰æ›´æ™‚ãƒ»beforeunloadï¼‰

## ãƒšãƒ¼ã‚¸å±¥æ­´ã®ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **ä»˜ç®‹å¤‰æ›´ã”ã¨**ï¼šä½œæˆãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ»ç§»å‹•ãƒ»ãƒªã‚µã‚¤ã‚ºæ™‚ã«å±¥æ­´æ›´æ–°
- **ãƒšãƒ¼ã‚¸é›¢è„±æ™‚**ï¼šbeforeunloadã§ã‚‚ä¿å­˜ï¼ˆå¿µã®ãŸã‚ï¼‰
- åŒä¸€ãƒšãƒ¼ã‚¸ã®å±¥æ­´ã¯ä¸Šæ›¸ãï¼ˆé‡è¤‡ã—ãªã„ï¼‰

## æ³¨æ„ç‚¹

- ãƒšãƒ¼ã‚¸å±¥æ­´ã¯æœ€å¤§10ä»¶ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤
- ã€Œç½®æ›ã€ãƒ¢ãƒ¼ãƒ‰ã§èª­ã¿è¾¼ã¿æ™‚ã¯ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤ºï¼ˆç¾åœ¨ã®ä»˜ç®‹ãŒæ¶ˆãˆã‚‹è­¦å‘Šï¼‰
- ã€Œãƒãƒ¼ã‚¸ã€ãƒ¢ãƒ¼ãƒ‰ã§ã¯ç¢ºèªä¸è¦ï¼ˆè¿½åŠ ã®ã¿ï¼‰

## ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ç®¡ç†

- ä¿å­˜å‰ã«ä½¿ç”¨é‡ã‚’ãƒã‚§ãƒƒã‚¯
- **4MBè¶…éæ™‚**ï¼šæ–°è¦ã‚»ãƒƒãƒˆä¿å­˜ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- `chrome.storage.local.getBytesInUse()` ã§ä½¿ç”¨é‡å–å¾—
- ã‚»ãƒƒãƒˆç®¡ç†ãƒ¢ãƒ¼ãƒ€ãƒ«ã«ç¾åœ¨ã®ä½¿ç”¨é‡ã‚’è¡¨ç¤ºï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
